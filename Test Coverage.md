# Test Coverage

Test Coverage (–ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏) ‚Äî —ç—Ç–æ –º–µ—Ç—Ä–∏–∫–∞, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∞—è –∫–∞–∫–∞—è —á–∞—Å—Ç—å –∫–æ–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–æ–≤. Go –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞.

## –ß—Ç–æ —Ç–∞–∫–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞

**–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞** ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç —Å—Ç—Ä–æ–∫/–±–ª–æ–∫–æ–≤/—Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–æ–≤.

```go
func Abs(x int) int {
    if x < 0 {           // —Å—Ç—Ä–æ–∫–∞ 1
        return -x        // —Å—Ç—Ä–æ–∫–∞ 2
    }
    return x             // —Å—Ç—Ä–æ–∫–∞ 3
}

// –¢–µ—Å—Ç –ø–æ–∫—Ä—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞
func TestAbsPositive(t *testing.T) {
    result := Abs(5)     // –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è —Å—Ç—Ä–æ–∫–∏ 1, 3
    if result != 5 {
        t.Error("failed")
    }
}
// –ü–æ–∫—Ä—ã—Ç–∏–µ: 66% (2 –∏–∑ 3 —Å—Ç—Ä–æ–∫)
```

## –ò–∑–º–µ—Ä–µ–Ω–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è

### –ë–∞–∑–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ–∫—Ä—ã—Ç–∏—è
go test -cover

# –í—ã–≤–æ–¥:
# PASS
# coverage: 75.5% of statements
# ok      mypackage    0.234s
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ –ø–æ –ø–∞–∫–µ—Ç–∞–º

```bash
# –ü–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ
go test -cover ./...

# –í—ã–≤–æ–¥:
# ok      myapp/handlers    0.123s    coverage: 82.3% of statements
# ok      myapp/services    0.089s    coverage: 91.7% of statements
# ok      myapp/models      0.045s    coverage: 65.4% of statements
```

## –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç –æ –ø–æ–∫—Ä—ã—Ç–∏–∏

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—á—ë—Ç–∞

```bash
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç—á—ë—Ç –≤ —Ñ–∞–π–ª
go test -coverprofile=coverage.out

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ –ø–æ —Ñ—É–Ω–∫—Ü–∏—è–º
go tool cover -func=coverage.out
```

–í—ã–≤–æ–¥:
```
mypackage/user.go:15:    CreateUser      87.5%
mypackage/user.go:28:    GetUser         100.0%
mypackage/user.go:42:    UpdateUser      75.0%
mypackage/user.go:58:    DeleteUser      0.0%
total:                   (statements)    78.2%
```

### HTML –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

```bash
# –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å HTML –æ—Ç—á—ë—Ç –∏ –æ—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
go tool cover -html=coverage.out

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å HTML –≤ —Ñ–∞–π–ª
go tool cover -html=coverage.out -o coverage.html
```

HTML –æ—Ç—á—ë—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- üü¢ **–ó–µ–ª—ë–Ω—ã–π** ‚Äî –∫–æ–¥ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è (–ø–æ–∫—Ä—ã—Ç —Ç–µ—Å—Ç–∞–º–∏)
- üî¥ **–ö—Ä–∞—Å–Ω—ã–π** ‚Äî –∫–æ–¥ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è (–Ω–µ –ø–æ–∫—Ä—ã—Ç)
- üü° **–ñ—ë–ª—Ç—ã–π** ‚Äî —á–∞—Å—Ç–∏—á–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –≤–µ—Ç–∫–∞ if)

## –†–µ–∂–∏–º—ã –ø–æ–∫—Ä—ã—Ç–∏—è

Go –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç—Ä–∏ —Ä–µ–∂–∏–º–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –ø–æ–∫—Ä—ã—Ç–∏—è:

```bash
# set: –ø–æ–∫—Ä—ã—Ç–∞ –ª–∏ —Å—Ç—Ä–æ–∫–∞ —Ö–æ—Ç—è –±—ã —Ä–∞–∑ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
go test -covermode=set -coverprofile=coverage.out

# count: —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤—ã–ø–æ–ª–Ω—è–ª–∞—Å—å —Å—Ç—Ä–æ–∫–∞
go test -covermode=count -coverprofile=coverage.out

# atomic: —Ç–æ –∂–µ —á—Ç–æ count, –Ω–æ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ (–¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤)
go test -covermode=atomic -coverprofile=coverage.out
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- `set` ‚Äî –±—ã—Å—Ç—Ä–µ–µ, –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤
- `count` ‚Äî –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ "–≥–æ—Ä—è—á–∏—Ö" —É—á–∞—Å—Ç–∫–æ–≤ –∫–æ–¥–∞
- `atomic` ‚Äî –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ç–µ—Å—Ç–æ–≤

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è

```go
func Divide(a, b float64) (float64, error) {
    if b == 0 {
        return 0, errors.New("division by zero")
    }
    return a / b, nil
}

// ‚ùå –ù–µ–ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ - —Ç–æ–ª—å–∫–æ happy path
func TestDivide(t *testing.T) {
    result, err := Divide(10, 2)
    if err != nil {
        t.Fatal(err)
    }
    if result != 5 {
        t.Errorf("got %v, want 5", result)
    }
}
// –ü–æ–∫—Ä—ã—Ç–∏–µ: ~60% (–Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Ç–∫—É —Å –æ—à–∏–±–∫–æ–π)

// ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ - –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –≤–µ—Ç–∫–∏
func TestDivide(t *testing.T) {
    tests := []struct {
        name      string
        a, b      float64
        want      float64
        wantError bool
    }{
        {"normal", 10, 2, 5, false},
        {"zero division", 10, 0, 0, true},
        {"negative", -10, 2, -5, false},
    }

    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            got, err := Divide(tt.a, tt.b)
            if (err != nil) != tt.wantError {
                t.Errorf("error = %v, wantError %v", err, tt.wantError)
            }
            if !tt.wantError && got != tt.want {
                t.Errorf("got %v, want %v", got, tt.want)
            }
        })
    }
}
// –ü–æ–∫—Ä—ã—Ç–∏–µ: 100%
```

### –ü—Ä–∏–º–µ—Ä 2: –ê–Ω–∞–ª–∏–∑ –Ω–µ–ø–æ–∫—Ä—ã—Ç–æ–≥–æ –∫–æ–¥–∞

```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
go test -coverprofile=coverage.out

# –°–º–æ—Ç—Ä–∏–º, –∫–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –ø–æ–∫—Ä—ã—Ç—ã
go tool cover -func=coverage.out | grep "0.0%"
```

–í—ã–≤–æ–¥ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å:
```
handlers/admin.go:42:    DeleteAllUsers    0.0%
services/email.go:15:    SendEmail         0.0%
```

–¢–µ–ø–µ—Ä—å –∑–Ω–∞–µ–º, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è —ç—Ç–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π.

## –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø–æ–∫—Ä—ã–≤–∞—Ç—å—Å—è —Ç–µ—Å—Ç–∞–º–∏

### ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

1. **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞** ‚Äî –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** ‚Äî –≤—Å–µ error paths
3. **–ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏** ‚Äî edge cases (–ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏, nil, max/min –∑–Ω–∞—á–µ–Ω–∏—è)
4. **–ü—É–±–ª–∏—á–Ω—ã–µ API** ‚Äî —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### ‚ùå –ú–æ–∂–Ω–æ –Ω–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

1. **–¢—Ä–∏–≤–∏–∞–ª—å–Ω—ã–µ –≥–µ—Ç—Ç–µ—Ä—ã/—Å–µ—Ç—Ç–µ—Ä—ã**
   ```go
   func (u *User) GetName() string { return u.name }
   ```

2. **–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥** ‚Äî protobuf, –º–æ–∫–∏

3. **main() —Ñ—É–Ω–∫—Ü–∏—è** ‚Äî –æ–±—ã—á–Ω–æ —Ç–æ–ª—å–∫–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

4. **–ü—Ä–æ—Å—Ç—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã**
   ```go
   func NewUser(name string) *User {
       return &User{name: name}
   }
   ```

## Coverage –≤ CI/CD

### GitHub Actions –ø—Ä–∏–º–µ—Ä

```yaml
name: Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Set up Go
        uses: actions/setup-go@v4
        with:
          go-version: '1.21'

      - name: Run tests with coverage
        run: go test -v -coverprofile=coverage.out -covermode=atomic ./...

      - name: Upload coverage to Codecov
        uses: codecov/codecov-action@v3
        with:
          files: ./coverage.out

      - name: Check coverage threshold
        run: |
          coverage=$(go tool cover -func=coverage.out | grep total | awk '{print $3}' | sed 's/%//')
          if (( $(echo "$coverage < 80" | bc -l) )); then
            echo "Coverage $coverage% is below 80%"
            exit 1
          fi
```

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ –ø–æ–∫—Ä—ã—Ç–∏—è

```bash
#!/bin/bash
# check_coverage.sh

THRESHOLD=80

# –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã
go test -coverprofile=coverage.out ./...

# –ü–æ–ª—É—á–∞–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ–∫—Ä—ã—Ç–∏—è
COVERAGE=$(go tool cover -func=coverage.out | grep total | awk '{print $3}' | sed 's/%//')

echo "Current coverage: $COVERAGE%"

# –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Å –ø–æ—Ä–æ–≥–æ–º
if (( $(echo "$COVERAGE < $THRESHOLD" | bc -l) )); then
    echo "‚ùå Coverage $COVERAGE% is below threshold $THRESHOLD%"
    exit 1
else
    echo "‚úÖ Coverage $COVERAGE% meets threshold $THRESHOLD%"
    exit 0
fi
```

## –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ–∫—Ä—ã—Ç–∏—è

### –ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–∫—Ä—ã—Ç–∏—è ‚Äî –Ω–µ —Å–∞–º–æ—Ü–µ–ª—å

```
100% –ø–æ–∫—Ä—ã—Ç–∏–µ ‚â† –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –±–∞–≥–æ–≤
```

**–ü–ª–æ—Ö–æ–π —Ç–µ—Å—Ç —Å 100% –ø–æ–∫—Ä—ã—Ç–∏–µ–º:**
```go
func TestAdd(t *testing.T) {
    Add(2, 3)  // –≤—ã–∑—ã–≤–∞–µ–º, –Ω–æ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç!
}
// –ü–æ–∫—Ä—ã—Ç–∏–µ: 100%, –Ω–æ —Ç–µ—Å—Ç –±–µ—Å–ø–æ–ª–µ–∑–µ–Ω
```

**–•–æ—Ä–æ—à–∏–π —Ç–µ—Å—Ç —Å 100% –ø–æ–∫—Ä—ã—Ç–∏–µ–º:**
```go
func TestAdd(t *testing.T) {
    result := Add(2, 3)
    if result != 5 {
        t.Errorf("got %d, want 5", result)
    }
}
// –ü–æ–∫—Ä—ã—Ç–∏–µ: 100%, –∏ —Ç–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
```

### –†–µ–∞–ª—å–Ω—ã–µ —Ü–µ–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

- **–ù–æ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã:** 80-90% –ø–æ–∫—Ä—ã—Ç–∏–µ
- **Legacy –∫–æ–¥:** 60-70% –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ª–æ–≥–∏–∫–∞:** —Å—Ç—Ä–µ–º–∏—Ç—å—Å—è –∫ 100%
- **–£—Ç–∏–ª–∏—Ç—ã, —Ö–µ–ª–ø–µ—Ä—ã:** 70-80%

## Best Practices

1. ‚úÖ **–°—Ç—Ä–µ–º–∏—Ç–µ—Å—å –∫ –≤—ã—Å–æ–∫–æ–º—É –ø–æ–∫—Ä—ã—Ç–∏—é, –Ω–æ –Ω–µ –∂–µ—Ä—Ç–≤—É–π—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ–º —Ç–µ—Å—Ç–æ–≤**
2. ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTML –æ—Ç—á—ë—Ç** –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–µ–ø–æ–∫—Ä—ã—Ç—ã—Ö —É—á–∞—Å—Ç–∫–æ–≤
3. ‚úÖ **–ü–æ–∫—Ä—ã–≤–∞–π—Ç–µ —Å–Ω–∞—á–∞–ª–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é –ª–æ–≥–∏–∫—É**, –ø–æ—Ç–æ–º –æ—Å—Ç–∞–ª—å–Ω–æ–µ
4. ‚úÖ **–ò–∑–º–µ—Ä—è–π—Ç–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤ CI/CD** –∏ –æ—Ç–∫–ª–æ–Ω—è–π—Ç–µ PR —Å –ø–∞–¥–µ–Ω–∏–µ–º –ø–æ–∫—Ä—ã—Ç–∏—è
5. ‚úÖ **–ò–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥** –≤ –º–µ—Ç—Ä–∏–∫–∞—Ö
6. ‚ùå **–ù–µ –≥–æ–Ω–∏—Ç–µ—Å—å –∑–∞ 100%** ‚Äî —ç—Ç–æ –Ω–µ –≤—Å–µ–≥–¥–∞ –æ–ø—Ä–∞–≤–¥–∞–Ω–æ
7. ‚ùå **–ù–µ –ø–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã —Ç–æ–ª—å–∫–æ —Ä–∞–¥–∏ –ø–æ–∫—Ä—ã—Ç–∏—è** ‚Äî –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å

## –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Å–µ—Ä–≤–∏—Å—ã

### Codecov

–û–Ω–ª–∞–π–Ω —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–∫—Ä—ã—Ç–∏—è:
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∫—Ä—ã—Ç–∏—è
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GitHub PR
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ PR —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –ø–æ–∫—Ä—ã—Ç–∏—è

```bash
# –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç—á—ë—Ç–∞ –≤ Codecov
bash <(curl -s https://codecov.io/bash) -f coverage.out
```

### Coveralls

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Codecov:
```bash
go get github.com/mattn/goveralls
goveralls -coverprofile=coverage.out -service=github
```

## –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–¥–∞ –∏–∑ –ø–æ–∫—Ä—ã—Ç–∏—è

Go –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–∏–≤—ã –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∫–æ–¥–∞, –Ω–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å build tags:

```go
// +build !test

package main

// –≠—Ç–æ—Ç –∫–æ–¥ –Ω–µ –±—É–¥–µ—Ç –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ —Ç–µ—Å—Ç–∞—Ö
func init() {
    // –∫–∞–∫–∞—è-—Ç–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
}
```

–ò–ª–∏ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:
```
main.go         # –Ω–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ç–µ—Å—Ç–∞–º–∏
handlers.go     # –ø–æ–∫—Ä—ã–≤–∞–µ—Ç—Å—è
handlers_test.go
```

## –í–æ–ø—Ä–æ—Å—ã —Å —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π

**–í–æ–ø—Ä–æ—Å:** –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∞ test coverage?

**–û—Ç–≤–µ—Ç:** Test coverage –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –≤—ã–ø–æ–ª–Ω–µ–Ω –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–æ–≤. –í Go –∏–∑–º–µ—Ä—è–µ—Ç—Å—è –ø–æ–∫—Ä—ã—Ç–∏–µ statements (—É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π). –í—ã—Å–æ–∫–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –±–∞–≥–æ–≤, –Ω–æ –Ω–∏–∑–∫–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.

**–í–æ–ø—Ä–æ—Å:** –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–∏–µ —á–∞—Å—Ç–∏ –∫–æ–¥–∞ –Ω–µ –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏?

**–û—Ç–≤–µ—Ç:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `go test -coverprofile=coverage.out`, –∑–∞—Ç–µ–º –æ—Ç–∫—Ä—ã—Ç—å HTML –æ—Ç—á—ë—Ç –∫–æ–º–∞–Ω–¥–æ–π `go tool cover -html=coverage.out`. –í –æ—Ç—á—ë—Ç–µ –Ω–µ–ø–æ–∫—Ä—ã—Ç—ã–π –∫–æ–¥ –±—É–¥–µ—Ç –≤—ã–¥–µ–ª–µ–Ω –∫—Ä–∞—Å–Ω—ã–º, –ø–æ–∫—Ä—ã—Ç—ã–π ‚Äî –∑–µ–ª—ë–Ω—ã–º.

**–í–æ–ø—Ä–æ—Å:** –ö–∞–∫–æ–π –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ–∫—Ä—ã—Ç–∏—è —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ö–æ—Ä–æ—à–∏–º?

**–û—Ç–≤–µ—Ç:** –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –Ω–µ—Ç. –î–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —Ä–∞–∑—É–º–Ω–∞—è —Ü–µ–ª—å ‚Äî 80-90%. –í–∞–∂–Ω–µ–µ –Ω–µ –ø—Ä–æ—Ü–µ–Ω—Ç, –∞ –ø–æ–∫—Ä—ã—Ç–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫. 100% –ø–æ–∫—Ä—ã—Ç–∏–µ –Ω–µ –≤—Å–µ–≥–¥–∞ –æ–ø—Ä–∞–≤–¥–∞–Ω–æ ‚Äî –≤–∞–∂–Ω–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤, –∞ –Ω–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ.

**–í–æ–ø—Ä–æ—Å:** –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–∫–ª—é—á–∏—Ç—å –∫–æ–¥ –∏–∑ coverage?

**–û—Ç–≤–µ—Ç:** –í Go –Ω–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–∏–≤ –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∫–æ–¥–∞ –∏–∑ –ø–æ–∫—Ä—ã—Ç–∏—è (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤). –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å build tags –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ —Ç–∞–∫, —á—Ç–æ–±—ã –Ω–µ—Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ —á–∞—Å—Ç–∏ –±—ã–ª–∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, main.go –Ω–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –≤—Å—è –ª–æ–≥–∏–∫–∞ –≤ –¥—Ä—É–≥–∏—Ö –ø–∞–∫–µ—Ç–∞—Ö).

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã

- [[Go - Unit —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ]]
- [[Go - Table-driven —Ç–µ—Å—Ç—ã]]
- [[Go - –ë–µ–Ω—á–º–∞—Ä–∫–∏–Ω–≥]]
- [[E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ]]